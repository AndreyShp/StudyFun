ProfileController={Init:function(){var i="#changeUniqueIdBlock",t=function(n,t){var i={isSuccess:n,removeLabels:!0,container:$("#profileMessageContainer"),text:t},r=new Message(i);r.Show()},r,n;MailBlock({url:ServerData.Patterns.Urls.SendToMail,mailBlockSelector:"#mailBlock",emailFieldSelector:"#emailField",showBtnBlockSelector:"#showMailBlockBtn",sendBtnSelector:"#sendUniqueIdBtn",showMessage:t,processedPost:function(n){n&&GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.ProfileSendUnique,{email:email})}}),CopyToClipboard({copyToClipboardBtnSelector:"#copyToClipboardBtn",textSelector:"#currentUniqueIdContainer"}),r=function(){$(i).hide()},n=$("#newUniqueId"),Global.focusClearField(n),$("#showChangeUniqueBlockBtn").click(function(){var t=$(i);t.toggle(),n.focus()}),$("#setNewUniqueIdBtn").click(function(){var u=$("#currentUniqueIdContainer"),i=n.val(),f;if(i==""||u.text()==i){t(!1,"Некорректные данные!<br />Введите идентификатор с другого устройства"),Global.setInputStyle(n,!0);return}f=ServerData.Patterns.Urls.SetNewValue,$.post(f,{newValue:i},$.proxy(function(f){var o=f!=null&&f.success,e;o?(e="Ваш идентификатор успешно изменен",r(),n.val(""),u.text(i),UserKnowledge.ShortInfo.Display(),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.ProfileChangeUnique,{newUniqueId:i})):e="Извините, не удалось изменить идентификатор. Проверьте правильность введенного идентификатора.<br />Попробуйте еще раз через несколько секунд",t(o,e)},this),"json")})}},$(function(){ProfileController.Init()});
