Global={setCookie:function(n,t,i){i=$.extend({expires:7300,path:"/"},i),$.cookie(n,t,i)},getCookie:function(n){return $.cookie(n)},escapeHTML:function(n){return $("<div/>").text(n).html()},initLeftPinnedPanel:function(n){var t=$(".left-pinned-panel");$(window).scroll(function(){var r=$(window).scrollTop(),u=$(window).height(),f=n.height()+u*.05,e=n.offset().top,i;i=e>=r?n.height():0,i+=5,t.css("padding-top",i),r>f?t.show():t.hide()}),t.click(function(){$("html, body").animate({scrollTop:0},"fast")})},setInputStyle:function(n,t){n[t===!0?"addClass":"removeClass"]("alert-danger")},isValidEmailAddress:function(n){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return t.test(n)},focusClearField:function(n){n.on("input paste",$.proxy(Global.setInputStyle,null,n)).on("click",$.proxy(Global.setInputStyle,null,n))},showMessage:function(n,t,i){var r={isSuccess:t,removeLabels:!0,container:$(n),text:i},u=new Message(r);u.Show()}},String.format=function(){for(var t=arguments[0],i,n=0;n<arguments.length-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),t=t.replace(i,arguments[n+1]);return t},SharePanel={replaceParamInUrl:function(n,t,i){var r=new RegExp(t+"=[^&]+","gi");return n.replace(r,t+"="+encodeURIComponent(i))},Update:function(n,t){var i=$(".b-share a");$.each(i,function(i,r){var f=$(r),u=f.attr("href");u=SharePanel.replaceParamInUrl(u,"url",n),u=SharePanel.replaceParamInUrl(u,"title",t),f.attr("href",u)})}},SearchPanel=function(){if(window.SearchPanelData==null||(this.Search=function(){var n=this.searchField.val();return this.select(n),!1},this.RemoveFilter=function(){return this.searchField.val(""),this.Search(),!1},this.select=function(n){var t=0;$.each(this.elems,function(i,r){var u=r.LowerName.indexOf(n);return u==-1?(t++,r.container.hide(),!0):(r.container.show(),!0)}),t>=1?this.filteredIcon.show():this.filteredIcon.hide()},this.SortBy=function(n){return Global.setCookie(SearchPanelData.SortCookieName,n),location.reload(),!1},this.elems=SearchPanelData.Elements,this.elems==null||this.elems.length==0))return null;var n=[];return $.each(this.elems,function(t,i){var r=String.format(SearchPanelData.PatternToSearchContainer,i.Id);i.container=$("#"+r),n.push(i.LowerName)}),this.searchField=$("#"+SearchPanelData.SearchField),this.searchField.focus(),this.searchField.typeahead({source:n,updater:$.proxy(this.select,this)}),this.filteredIcon=$("#"+SearchPanelData.FilteredIcon),this}(),LanguagePanel={fromLanguage:null,toLanguage:null,observers:[],IsShowed:!1,getImageTag:function(n){var t=ServerData.GetPath("Content/images/"+n.Image);return'<img src="'+t+'" alt="'+n.Title+'" class="country-flag-icon img-rounded" />'},OnChangeLanguage:function(){var n=this.fromLanguage,t=this.toLanguage;this.SetLanguages(t,n),Global.setCookie("languages",t.Id+";"+n.Id),$.each(this.observers,function(i,r){r(t.Id,n.Id)})},AddObserver:function(n){this.observers.push(n)},SetLanguages:function(n,t){this.fromLanguage=n,this.toLanguage=t;var i=this.getImageTag(n),r=this.getImageTag(t);$("#languagesPanel").html(i+'<span class="glyphicon glyphicon-chevron-right" style="font-size:11px;"></span>'+r)},GetLanguages:function(){return{from:this.fromLanguage,to:this.toLanguage}},GetSourceLanguageId:function(){return this.fromLanguage.Id},ShowPanel:function(){this.IsShowed=!0,$("#languagesPanel").show()}},LanguageObserverHelper=function(n){var t=(n!=null?n.action:null)||function(){},r=ServerData.Languages.from.Id,i=[],u=function(n){var u,f;r==n?(u="source",f="translation"):(f="source",u="translation"),$.each(i,function(n,i){i.sourceElem.html(i[u]),i.translationElem.html(i[f]),t(i.sourceElem,i.translationElem)})};this.AddRow=function(n,r){var u=$(n).find(".source"),f=$(n).find(".translation"),s=LanguagePanel.GetSourceLanguageId(),e,o;$.isNumeric(r)&&r!=s&&(e=f.html(),o=u.html(),f.html(o),u.html(e)),t(u,f),i.push({sourceElem:u,source:u.html(),translationElem:f,translation:f.html()})},LanguagePanel.AddObserver(u)},PopupAlert={visibleMessages:[],Show:function(n){var u=$.extend({text:"Что-то не так:(",header:"Ошибка"},typeof n=="string"?{text:n}:n),i=u.text,r,t;i&&$.inArray(i,PopupAlert.visibleMessages)==-1&&(PopupAlert.visibleMessages.push(i),r=$('<div class="alert alert-danger fade in popup-alert-ctrl"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button><h4>'+u.header+"</h4><p>"+i+"</p></div>").bind("closed.bs.alert",function(){PopupAlert.visibleMessages.splice($.inArray(i,PopupAlert.visibleMessages),1)}),t=0,GlobalBusiness!=null&&GlobalBusiness.TopPanel!=null&&(t=GlobalBusiness.TopPanel.GetHeight()),$.each($(".popup-alert-ctrl"),function(n,i){var u=$(i).offset().top+$(i).outerHeight(),f=$(window).height()+r.height();u>t&&u<f&&(t=u)}),t>0&&r.css("top",t+10+"px"),$("body").append(r))}},ToggleTranslateBtn=function(n){var t=new ToggleBtn({block:n.translated,btn:n.translatedToogle,cookieName:n.skipCookie!=="true"?"hideTranslation":null,captionShow:"Показать перевод &raquo;",captionHide:"Спрятать перевод &laquo;",isHidden:n.isHidden});this.Toogle=function(){return t.Toogle()},this.IsVisible=function(){return t.IsVisible()},this.Hide=function(){return t.Hide()}},ToggleBtn=function(n){var t=n,i=function(n){var i;i=n?t.captionShow:t.captionHide,t.block.toggle(),t.btn.html(i)},r;this.Toogle=function(){var n=this.IsVisible();return t.cookieName!=null&&Global.setCookie(t.cookieName,n),i(n),!1},r=t.cookieName!=null?Global.getCookie(t.cookieName):!1,(r==="true"||t.isHidden===!0)&&i(!0),this.IsVisible=function(){return t.block.is(":visible")},this.Hide=function(){this.IsVisible()&&i(!0)}},Speaker={audio:null,Speak:function(n,t){var i,r,u;this.audio!=null&&this.audio.pause(),this.audio=new Audio,i=this.audio.canPlayType("audio/mp3"),r=i!=""&&i!="no",r||PopupAlert.Show("Извините, мы не можем воспроизвести mp3-файл в вашем браузере:( Весь функционал сайта работает в браузерах Firefox и Chrome."),u=ServerData.SpeakerHelper.GetUrl(n,t,r),this.audio.setAttribute("src",u),this.audio.play()},SpeakIfNeed:function(n,t){var i=this.NeedSpeak(n);return i&&this.Speak(n.Id,t),i},GetWordHtml:function(n){return this.GetHtml(n,ServerData.SpeakerHelper.Ids.Word)},GetSentenceHtml:function(n){return this.GetHtml(n,ServerData.SpeakerHelper.Ids.Sentence)},GetHtml:function(n,t){var i=this.NeedSpeak(n)?String.format(ServerData.SpeakerHelper.GetHtml(n.Id,t)):"";return i+n.Text},NeedSpeak:function(n){return n.HasPronunciation},SpeakElemPartByLanguage:function(n,t,i){var e,r,u,f;n&&t&&(e=LanguagePanel.GetSourceLanguageId(),t.Source.LanguageId==e?(r=t.Source,u=t.Translation):(r=t.Translation,u=t.Source),f=Speaker.NeedSpeak(r)?r:u,Speaker.SpeakIfNeed(f,i))}},GlobalBusiness={markAsShowed:function(n,t,i){$.post(n,{id:t},function(r){var u=r!=null&&r.success;u||i===!1||GlobalBusiness.markAsShowed(n,t,!1)},"json")},setMetaTag:function(n,t){$("meta[name='"+n+"']").attr("content",t)},setKeywords:function(n){GlobalBusiness.setMetaTag("keywords",n)},setDescription:function(n){GlobalBusiness.setMetaTag("description",n)},showExamplesInWindow:function(n,t){var i="<ol>",r;$.each(t,function(n,t){i+="<li>"+t+"</li>"}),i+="<ol>",r=new PrettyWindow({header:n,body:i}),r.Show()},newVisitor:function(n){setTimeout(function(){var t=ServerData.GetPath(n);$.post(t)},1e4)},TopPanel:new function(){var n=$("div.navbar"),t,i;this.GetPanel=function(){return n},this.GetHeight=function(){return n.height()},t=this.GetHeight(),i=$(window).height(),this.IsFixedToTop=t<i*.5,this.IsFixedToTop&&($("body").css("padding-top","60px"),n.removeClass("navbar-static-top"),n.addClass("navbar-fixed-top"),n.affix())},Counter:{Ids:{AddKnowledge:"ADD_KNOWLEDGE",Download:"DOWNLOAD",MyKnowledge:"MY_KNOWLEDGE",FeedbackPost:"FEEDBACK_POST",InterviewWindow:"INTERVIEW_WINDOW",ProfileChangeUnique:"PROFILE_CHANGE_UNIQUE",ProfileSendUnique:"PROFILE_SEND_UNIQUE",UserTaskNew:"USER_TASK_NEW",UserTaskNewComment:"USER_TASK_NEW_COMMENT",BuyClick:"BUY_CLICK",PayClick:"PAY_CLICK",CloseTopBanner:"CLOSE_TOP_BANNER"},reachGoal:function(n,t){if(ServerData.YandexMetrikaId){var i=window["yaCounter"+ServerData.YandexMetrikaId];i&&i.reachGoal(n,t)}}},Interview:function(n){var t="#interviewWindow",f="#interviewWindowContainer",i="interviewCookie",e=Global.getCookie(i),r,u;e||(r='<div class="modal fade" id="interviewWindow" role="dialog" aria-labelledby="interviewWindowLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="interviewWindowTitle">Анкета опроса</h4></div><div class="modal-body modal-scrollable" id="interviewWindowContainer"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" tabindex="3">Закрыть</button><button type="button" class="btn btn-success" id="interviewPostBtn" tabindex="4">Голосовать</button></div></div></div></div>',$("body").append(r),$("#interviewPostBtn").click(function(){var r=[],u=$("[data-interview-answer]:checked");if($.each(u,function(n,t){var i=$(t).attr("data-interview-answer");r.push(i)}),r.length==0){$(t).modal("hide");return}$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",type:"POST",url:ServerData.Interview.AnswerInterviewUrl,data:"{answersIds:"+JSON.stringify(r)+"}",success:$.proxy(function(r){var u=r!=null&&r.success;u&&(Global.setCookie(i,!0,{expires:null}),n.hide()),$(t).modal("hide")},this)})}),u=function(n){for(var i="",u,e,o,r=0;r<n.length;r++){for(u=n[r],i+=String.format('<span class="interview-question">{0}</span><div class="interview-answers-container">',u.Question),e=0;e<u.Answers.length;e++)o=u.Answers[e],i+=String.format('<div class="checkbox"><label><input type="checkbox" data-interview-answer="{0}"> {1}</label></div>',o.Id,o.Text);i+="</div></div>"}$(f).html(i),$(t).modal("show")},$.getJSON(ServerData.Interview.GetInterviewsUrl,function(t){if(t==null||t.length==0){n.hide();return}n.css("display","inline-block"),n.click(function(){u(t),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.InterviewWindow)})}))},maxLengthAttention:function(n){var t,i;if(n&&n.field&&(t=n.field,i=t.attr("maxLength"),i&&!isNaN(i))){var f=parseInt(i),r=function(){return f-t.val().length},u=t.attr("id")+"RemainCountChars",e=String.format('<div class="max-length-attention-message">Максимальная длина {0}{1} символов. У вас осталось <span id="{2}">{3}</span></div>',n.inputTitle?n.inputTitle+" ":"",i,u,r());$(e).insertAfter(t);t.on("keyup",function(){var n=r();$("#"+u).text(n)})}},shuffle:function(n){for(var t=[],u=function(t){for(var u,r,i=0;i<3;i++)if(u=Math.random()*n.length,r=parseInt(u),r!=t)return r;return t},i,r;n.length>0;)i=u(t.length),r=n[i],t.push(r),n.splice(i,1);return t},closeTopBanner:function(n,t){Global.setCookie(t,!0),$(n).remove(),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.CloseTopBanner)},closeTopMessage:function(n,t){Global.setCookie(t,!0),$(n).remove()},findById:function(n,t){t=t||ServerData.Elements||[];var i=null;return $.each(t,function(t,r){var u=r.Id==n;return u&&(i=r),!u}),i}},UserKnowledgePopupPanel=function(n){var r=ServerData.PopupTrainerInitialUrl;if(r!=null){var t=function(t){var i={left:$(window).width()-$(t).width()-15,top:n.height()+5};t.offset(i)},u=function(){var n=$('<div class="popup-knowledge-repeat-btn" title="У вас есть знания, которые нужно повторить" style="display:none;"><span class="glyphicon glyphicon-time"></span></div>');return $("body").append(n),t(n),n},f=function(n,i){var u="popupKnowledgeClose",r=$('<div id="popupKnowledgePanel" class="modal-dialog popup-knowledge-panel" id="popupPanel" style="display:none;"><div class="modal-content"><div class="modal-header"><button type="button" class="close" id="'+u+'">&times;</button><h4 class="modal-title" id="myModalLabel">Повторяем знания</h4></div><div class="modal-body text-center">'+n+"</div></div></div>");return $("body").append(r),t(r),r.draggable(),$("#"+u).click(function(){r.hide({complete:i})}),r},i=$.proxy(function(){this.smartTrainer.ClearItems(),this.icon.hide(),this.popupLanguagePanel.hide(),$.getJSON(ServerData.PopupTrainerLoadDataUrl,$.proxy(function(n){if(n==null||n.length==0){setTimeout(i,1e4);return}this.smartTrainer.SetItems(n),this.icon.show()},this))},this);$.getJSON(r,$.proxy(function(n){if(n!=null&&n.html!=null){var r=n.items;this.icon=u(),this.popupLanguagePanel=f(n.html,$.proxy(function(){this.smartTrainer.HasItems()&&this.icon.show()},this)),this.icon.click($.proxy(function(){this.icon.hide({duration:200,complete:$.proxy(function(){this.smartTrainer.HasItems()&&this.popupLanguagePanel.show()},this)}),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.MyKnowledge)},this)),this.smartTrainer=new SmartTrainer({setMarkUrl:ServerData.PopupTrainerSetMarkUrl,sourceLanguageId:n.sourceLanguageId,OnEmptyData:i,loop:!1,repetitionType:ServerData.PopupTrainerRepetitionType}),r.length>0?(this.smartTrainer.SetItems(r),this.icon.show()):i(),$(window).resize($.proxy(function(){t(this.icon),t(this.popupLanguagePanel)},this))}},this))}},SmartTrainer=function(n){var i,r,t,e,o;this.sourceLanguageId=n.sourceLanguageId,this.currentItem=null,i=n.repetitionType,this.containers={source:$("#trainerSourceContainer"),translation:$("#trainerTranslationContainer"),panel:$("#trainerPanelBtns"),translatedBtn:$("#trainerTranslationToogleId"),image:$("#imageContainerId")},r=this.containers.image.length>0,this.translationToogleBtn=new ToggleTranslateBtn({translated:this.containers.translation,translatedToogle:this.containers.translatedBtn,skipCookie:!0,isHidden:!0}),t=$.proxy(function(n){if(n>=this.items.length)return!1;this.index=n,this.currentItem=this.items[n],r&&this.currentItem.ImageUrl?(this.containers.image.attr("src",this.currentItem.ImageUrl),this.containers.image.show()):r&&this.containers.image.hide();var t=this.currentItem.HtmlSource,i=this.currentItem.HtmlTranslation;return this.sourceLanguageId!=null&&this.currentItem.SourceLanguageId!=this.sourceLanguageId&&(t=this.currentItem.HtmlTranslation,i=this.currentItem.HtmlSource),this.containers.source.html(t),this.containers.translation.html(i),!0},this),this.items=[],LanguagePanel.IsShowed&&LanguagePanel.AddObserver($.proxy(function(n){this.sourceLanguageId=n,t(this.index)},this)),this.containers.panel.show(),this.containers.translatedBtn.click($.proxy(function(){this.translationToogleBtn.Toogle()},this));var u=n.OnEmptyData,f=$.proxy(function(n){var t,i,r;if(n==null||n.length==0){u!=null&&u();return}for(t=this.items,$.each(t,$.proxy(function(n,t){return t.NeedRemove=!0,!0},this)),$.each(n,function(n,i){var r=!1;i.TimeToShow=new Date(i.NextTimeToShow),$.each(t,function(n,u){return r=u.DataId==i.DataId,r&&(t[n]=i),!r}),r||t.push(i)}),i=t.length-1;i>=0;i--)r=t[i],r.NeedRemove===!0&&t.splice(i,1);t.sort(function(n,t){return n.NextTimeToShow-t.NextTimeToShow}),$.each(t,$.proxy(function(n,t){var i=!0;return t.DataId!=this.currentItem.DataId&&(this.index=n-1,i=!1),i},this))},this),s=n.loop,h=n.setMarkUrl;this.SetMark=function(n){var e,r,o;this.currentItem!=null&&(this.translationToogleBtn.Hide(),e={DataId:this.currentItem.DataId,DataType:this.currentItem.DataType},r="{mark:"+n+",item:"+JSON.stringify(e),i!=null&&(r+=",repetitionType:"+i),r+="}",o=t(this.index+1),o||(s?t(0):u()),$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",type:"POST",url:h,data:r,success:$.proxy(function(n){if(n.success!==!1)f(n.items);else{var t=(n!=null?n.message:null)||"Извините, что-то пошло не так и мы не смогли поставить оценку:(. Попробуйте позже.";PopupAlert.Show(t)}},this)}))},this.SetItems=function(n){this.items.length>0?f(n):this.items=n,t(0)},this.ClearItems=function(){this.items=[],this.currentItem=null},this.HasItems=function(){return this.items.length>0},e=$.proxy(this.SetMark,this),o=this.containers.panel.find("[data-mark]"),$.each(o,$.proxy(function(n,t){$(t).click(function(){e($(this).attr("data-mark"))})},this))},UserKnowledgeShortInfo=function(){var i="knowledgeTodayCount",t="knowledgeTotalCount",n=function(n,r){var u=function(n){return' style="color:'+(n>0?"#468847":"#B94A48")+'"'},f='<span id="'+i+'"'+u(n)+' title="Кол-во ваших знаний за сегодня">'+n+'</span><span style="color:#999;">/</span><span id="'+t+'"'+u(r)+' title="Кол-во ваших знаний за все время">'+r+"</span>";$("#knowledgeShortInfo").html(f)};this.Display=function(){var t=ServerData.GetPath(ServerData.Knowledge.GetStatisticUrl);$.getJSON(t,$.proxy(function(t){if(t==null||t.Today==null||t.Total==null){n(0,0);return}var i=t.Today.Total||0,r=t.Total.Total||0;n(i,r)},this))},this.Increment=function(){var r=$("#"+i),u=$("#"+t),f=parseInt(r.html()),e=parseInt(u.html());isNaN(f)||isNaN(e)||(r.html(),u.html,n(f+1,e+1))}},UserKnowledge={savedInfo:null,okIds:[],ShortInfo:new UserKnowledgeShortInfo,GetManySelectorByType:function(n){return"[data-knowledge-many='"+n+"']"},GetSelectorByType:function(n){return"[data-knowledge-type='"+n+"']"},Add:function(n){var i=ServerData.Knowledge!=null?ServerData.Knowledge.AddUrl:null;if(i){var t=this.getKnowlegeItem(n),u=t.DataId,r=t.DataType;$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",type:"POST",url:ServerData.GetPath(i),data:"{ knowledgeItem:"+JSON.stringify(t)+"}",success:$.proxy(function(t){var u=t!=null&&t.success,i;u?(this.incrementIfNeed(n),this.setOkIconToCtrl(n),this.setOkIconToManyIfNeed(r)):(i=(t!=null?t.message:null)||"Извините, мы не смогли добавить данные на обучение. Попробуйте позже.",PopupAlert.Show(i))},this)}),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.AddKnowledge,{id:u,type:r})}},AddMany:function(n){var t=ServerData.Knowledge!=null?ServerData.Knowledge.AddManyUrl:null;if(t){var i=$(UserKnowledge.GetSelectorByType(n)),r=[],u=$.proxy(this.getKnowlegeItem,this);$.each(i,function(n,t){var i=u(t);r.push(i)}),$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",type:"POST",url:ServerData.GetPath(t),data:"{ knowledgeItems:"+JSON.stringify(r)+"}",success:$.proxy(function(t){var u=t!=null&&t.success,r;u?($.each(i,$.proxy(function(n,t){this.incrementIfNeed(t),this.setOkIconToCtrl(t)},this)),this.setOkIconToManyIfNeed(n)):(r=(t!=null?t.message:null)||"Извините, мы не смогли добавить данные на обучение. Попробуйте позже.",PopupAlert.Show(r))},this)}),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.AddKnowledge,{id:"many",type:n})}},getKnowlegeItem:function(n){var t=this.getDataIdByCtrl(n),i=$(n).data("knowledgeType");return{DataId:t,DataType:i}},getDataIdByCtrl:function(n){return $(n).data("knowledgeId")},RebindClick:function(n,t){$(t).removeAttr("onClick").unbind("click").click(function(){$(this).data("knowledgeId",n),UserKnowledge.Add(this)})},ShowBtn:function(n){var t=UserKnowledge.GetSelectorByType(ServerData.KnowledgeDataType),i=$(n).find(t);i.show()},CheckExistenceIds:function(){var n=[],t=UserKnowledge.GetSelectorByType(ServerData.KnowledgeDataType),i=$(t),r=this.getDataIdByCtrl;$.each(i,function(t,i){var u=r(i);n.push(u)}),this.Load(n)},Load:function(n,t){var i=ServerData.KnowledgeDataType,r,u;if(i!=null){t===!0&&(r=$(UserKnowledge.GetSelectorByType(i)),u=this.getDataIdByCtrl(r),n.push(u));var f=this.getDataIdByCtrl,e=$.proxy(this.setOkIconToCtrl,this),o=ServerData.GetPath(ServerData.Knowledge.GetExistenceIdsUrl);$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",type:"POST",url:o,data:"{ids:"+JSON.stringify(n)+",dataType:"+i+"}",success:$.proxy(function(n){var t=n!=null?n:[],r;t.length!=null&&t.length!=0&&($.each(t,$.proxy(function(n,t){this.addOkId(t)},this)),r=$(UserKnowledge.GetSelectorByType(i)),$.each(r,function(n,i){var u=f(i),r=$.inArray(u,t),o=r!=-1;return o&&(e(i),t.splice(r,1)),!0}),this.setOkIconToManyIfNeed(i))},this)})}},SetAppropriateIcon:function(n){var f=ServerData.KnowledgeDataType,i=UserKnowledge.GetSelectorByType(f),t=$(i),e=this.isInOkIds(n),r,u;if(e)this.setOkIconToCtrl(t);else{if(r=this.isBtnToAdd(t),r)return;u=this.savedInfo!=null?this.savedInfo.title:"Добавить данные ко мне на обучение",$(t).removeClass("glyphicon-ok").addClass("glyphicon-plus cursor-pointer").css("color","").attr("title",u),this.RebindClick(n,i)}},isBtnToAdd:function(n){return $(n).hasClass("glyphicon-plus")},incrementIfNeed:function(n){this.isBtnToAdd(n)&&this.ShortInfo.Increment()},setOkIconToCtrl:function(n){this.savedInfo==null&&(this.savedInfo={title:$(n).attr("title")});var t=this.getDataIdByCtrl(n);this.addOkId(t),$(n).attr("onclick","").unbind("click").removeClass("glyphicon-plus cursor-pointer").addClass("glyphicon-ok").css("color","#4CAE4C").attr("title","Ранее было добавлено к Вам на стену знаний")},isInOkIds:function(n){var t=$.inArray(n,this.okIds);return t!=-1},addOkId:function(n){n==null||this.isInOkIds(n)||this.okIds.push(n)},setOkIconToManyIfNeed:function(n){var i=UserKnowledge.GetSelectorByType(n),r=$(i).hasClass("glyphicon-plus"),t;r||(t=$(UserKnowledge.GetManySelectorByType(n)),this.setOkIconToCtrl(t))}},AutoPronounceCheckBox=function(){var n="#autoPronounce",t="autoPronounce",i;this.IsChecked=function(){return $(n).is(":checked")},i=Global.getCookie(t),i=="true"&&$(n).attr("checked",!0),$(n).click($.proxy(function(){var n=this.IsChecked();Global.setCookie(t,n,{expires:null})},this))},Message=function(n){this.options=n,this.Show=function(){this.options.removeLabels&&this.Remove();var n=String.format('<span class="label label-{0} clickable-element" onClick="$(this).remove();">{1}</span>',this.options.isSuccess?"success":"danger",this.options.text);this.options.container.append(n),this.options.container.show()},this.Remove=function(){var n=this.options.container.children(".label");n.remove()}},PrettyWindow=function(n){$("#prettyModalWindow").remove();var t=n.header,i=n.body,r='<div id="prettyModalWindow" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 id="myModalLabel">'+t+'</h4></div><div class="modal-body">'+i+'</div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Закрыть</button></div></div></div></div>';$("body").append(r),this.Show=function(){$("#prettyModalWindow").modal("show")}},FeedbackWindow=new function(){var t="#feedbackWindowEmail",n="#feedbackWindowMessage",i="#feedbackPostBtn",r="#feedbackWindow",u="#feedbackMessageContainer",f=function(){$(i).removeAttr("disabled")},e=function(){$(t).val(""),$(n).val("")},o=function(n,t){Global.setInputStyle(n,t)},s=function(n){var t=new Message({isSuccess:!1,removeLabels:!0,text:n,container:$(u)});t.Show()},h=function(){var h=$(n).val().trim(),r,c;if(h==""){o($(n),!0),s("Некорректные данные!<br />Введите сообщение");return}if(r=$(t).val().trim(),r!=""&&!Global.isValidEmailAddress(r)){o($(t),!0),s("Некорректные данные!<br />Введите правильный адрес электронной почты");return}r=Global.escapeHTML(r),h=Global.escapeHTML(h),$(i).attr("disabled","disabled"),c=ServerData.Feedback.PostUrl,$.post(c,{email:r,message:h},$.proxy(function(n){var i,t,r;f(),i=n!=null&&n.success,t={isSuccess:i,removeLabels:!0,container:$(u)},i?(t.text="Спасибо! Ваше сообщение успешно отправлено",e()):t.text="Извините, но Ваше сообщение не удалось отправить.<br />Попробуйте еще раз через несколько секунд",r=new Message(t),r.Show()},this),"json"),GlobalBusiness.Counter.reachGoal(GlobalBusiness.Counter.Ids.FeedbackPost)},c='<div class="modal fade" id="feedbackWindow" role="dialog" aria-labelledby="feedbackWindowLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="feedbackWindow">Форма обратной связи</h4></div><div class="modal-body"><textarea class="form-control feedback-window-text-area" rows="5" placeholder="Ваше сообщение" id="feedbackWindowMessage" autofocus tabindex="1"></textarea><div class="input-group"><span class="input-group-addon">@</span><input class="form-control" type="text" placeholder="Адрес электронной почты(необязательно для заполнения)" id="feedbackWindowEmail" tabindex="2"></div><span class="feedback-tip">(адрес электронной почты следует указывать, если хотите получить ответ)</span></div><div class="modal-footer"><div id="feedbackMessageContainer" style="display:none;" class="text-left pull-left"></div><button type="button" class="btn btn-default" data-dismiss="modal" tabindex="3">Закрыть</button><button type="button" class="btn btn-success" id="feedbackPostBtn" tabindex="4">Отправить</button></div></div></div></div>';$("body").append(c),$(i).click(h),Global.focusClearField($(n)),$(n).focus(),Global.focusClearField($(t)),$(t).focus(),this.Show=function(){return $(r).modal("show"),f(),e(),$(n).focus(),!1},this.Hide=function(){$(r).modal("hide")}},CopyToClipboard=function(n){var t=$(n.copyToClipboardBtnSelector),i=ServerData.GetPath("Scripts/Controls/ZeroClipboard.swf");t.attr("data-clipboard-text",$(n.textSelector).text()),ZeroClipboard(t,{moviePath:i,debug:!1})},MailBlock=function(n){var i=n.mailBlockSelector,r=n.showMessage,u=n.processedPost,f=n.url,e=function(){$(i).hide()},t=$(n.emailFieldSelector);Global.focusClearField(t),$(n.showBtnBlockSelector).click(function(){var n=$(i);n.toggle(),t.focus()}),$(n.sendBtnSelector).click(function(){var i=t.val().trim(),o;if(i==""||!Global.isValidEmailAddress(i)){r(!1,"Некорректные данные!<br />Введите правильный адрес электронной почты"),Global.setInputStyle(t,!0);return}o={email:i},n.dataToPostModifier!=null&&n.dataToPostModifier(o),$.post(f,o,function(n){var i=n!=null&&n.success,f;i?(f="Вам на почту успешно отправлен идентификатор",e(),t.val("")):f="Извините, не удалось отправить идентификатор. Проверьте правильность введенного адреса электронной почты.<br />Попробуйте еще раз через несколько секунд",r(i,f),u!=null&&u(i)},"json")})},function(n){n.fn.loading=function(n){return n==="hide"?this.html("").removeClass("loading"):(n==="show"&&(n="Загрузка"),this.html(n+"&hellip;").addClass("loading"))}}(jQuery),$(function(){function r(){for(var t="uniqueUser",f=Global.getCookie(t),i=0,r=document.cookie.split(";"),u,n=1;n<=r.length;n++)u=r[n-1],u.indexOf(t)>-1&&i++;i>1&&Global.setCookie(t,f,{domain:"",path:"/",expires:-1})}var n,t,i;ServerData&&ServerData.Languages&&(LanguagePanel.SetLanguages(ServerData.Languages.from,ServerData.Languages.to),LanguagePanel.ShowPanel()),n=GlobalBusiness.TopPanel.GetPanel(),t=function(){var e=$("#contentContainer"),i=e.offset(),r,t;if(i&&(r=n.height()+10,t=Math.round(r-i.top),i.top=r,e.offset(i),t!=0)){var u=$(".our-navbar-bottom"),o=u.offset(),f=u.css("padding-top").replace("px","");$.isNumeric(f)&&(t>0?t+=parseInt(f):t-=parseInt(f)),o.top+=t,u.offset(o)}},t(),$(window).resize($.proxy(function(){t()})),Global.initLeftPinnedPanel(n),UserKnowledge.ShortInfo.Display(),new UserKnowledgePopupPanel(n),i=$("#interviewBtn"),i.length>0&&GlobalBusiness.Interview(i),r()});
